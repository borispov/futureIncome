---
export interface Props {
  stocks: any[];
}

const { stocks } = Astro.props;
---

<div class="overflow-x-auto border border-gray-200 rounded-lg shadow-sm bg-white">
  <table class="min-w-full text-xs">
    <thead class="bg-gray-100 border-b border-gray-200">
      <tr class="text-left">
        <th class="px-2 py-2 font-semibold">Ticker</th>
        <th class="px-2 py-2 font-semibold text-right">Revenue</th>
        <th class="px-2 py-2 font-semibold text-right">Revenue Growth TTM</th>
        <th class="px-2 py-2 font-semibold text-right">Gross Profit</th>
        <th class="px-2 py-2 font-semibold text-right">Operating Income</th>
        <th class="px-2 py-2 font-semibold text-right">Net Income</th>
        <th class="px-2 py-2 font-semibold text-right">Free Cash Flow</th>
      </tr>
    </thead>
    <tbody>
      {stocks.map((s) => {
        const f = s.financials || {};

        const revenue = f.revenue ? `$${(f.revenue / 1e9).toFixed(2)}B` : "N/A";
        const revenueGrowth = f.revenueGrowth
          ? (f.revenueGrowth * 100).toFixed(1) + "%"
          : "N/A";
        const grossProfit = f.grossProfit
          ? `$${(f.grossProfit / 1e9).toFixed(2)}B`
          : "N/A";
        const operatingIncome = f.operatingIncome
          ? `$${(f.operatingIncome / 1e9).toFixed(2)}B`
          : "N/A";
        const netIncome = f.netIncome
          ? `$${(f.netIncome / 1e9).toFixed(2)}B`
          : "N/A";
        const fcf = f.freeCashFlow
          ? `$${(f.freeCashFlow / 1e9).toFixed(2)}B`
          : "N/A";

        return (
          <tr class="border-b last:border-0 hover:bg-gray-50">
            <td class="px-2 py-1 font-bold">{s.ticker}</td>
            <td class="px-2 py-1 text-right">{revenue}</td>
            <td class="px-2 py-1 text-right">{revenueGrowth}</td>
            <td class="px-2 py-1 text-right">{grossProfit}</td>
            <td class="px-2 py-1 text-right">{operatingIncome}</td>
            <td class="px-2 py-1 text-right">{netIncome}</td>
            <td class="px-2 py-1 text-right">{fcf}</td>
          </tr>
        );
      })}
    </tbody>
  </table>
</div>

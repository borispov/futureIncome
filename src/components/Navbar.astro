---
import { Calculator, Sun, Moon, TrendingUp, PiggyBank, BarChart3, Target, Crown } from "lucide-react";

const calculators = [
  { name: "DRIP Investing", href: "/tools/drip-calculator", icon: Calculator, description: "Dividend Reinvestment Plan Calculator" },
  { name: "Debt or Invest", href: "/tools/debt-or-invest", icon: Calculator, description: "Decide what's best for your money" },
  { name: "Retirement", href: "/tools/retirement", icon: PiggyBank, description: "Retirement Planning Calculator" },
  { name: "Compound Growth", href: "/tools/compound-calculator", icon: TrendingUp, description: "Compound Interest Calculator" },
  { name: "DGRW", href: "/tools/dgrw", icon: BarChart3, description: "Dividend Growth Calculator" },
  { name: "F.I.R.E", href: "/tools/fire-calculator", icon: Target, description: "Financial Independence Calculator" },
  { name: "King Stocks", href: "/king-stocks", icon: Crown, description: "Dividend Champion Stock Analysis" },
];

const currentPath = Astro.url.pathname;
---

<nav class="border-b bg-white dark:bg-neutral-950 dark:border-neutral-800 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-neutral-950/60">
  <div class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 flex justify-between items-center h-10">
    <!-- Left: Links -->
    <div class="flex items-center space-x-0.5">
      {calculators.map((calc) => {
        const Icon = calc.icon;
        return (
          <a
            href={calc.href}
            class="inline-flex items-center px-1.5 py-1 text-[11px] font-medium rounded transition-colors text-gray-700 dark:text-gray-200 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-neutral-100 dark:hover:bg-neutral-800"
            title={calc.description}
          >
            <span class="flex items-center justify-center w-4 h-4 mr-1">
              <Icon className="w-3 h-3" />
            </span>
            {calc.name}
          </a>
        );
      })}
    </div>

    <!-- Right: Theme toggle -->
    <button
      id="theme-toggle"
      class="p-1 rounded transition-colors bg-neutral-200 dark:bg-neutral-800 text-gray-700 dark:text-gray-200 hover:bg-neutral-300 dark:hover:bg-neutral-700"
      aria-label="Toggle dark mode"
    >
      <span id="theme-icon-sun" class="hidden"><Sun className="w-4 h-4" /></span>
      <span id="theme-icon-moon"><Moon className="w-4 h-4" /></span>
    </button>
  </div>
</nav>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("theme-toggle");
    const sun = document.getElementById("theme-icon-sun");
    const moon = document.getElementById("theme-icon-moon");

    function setTheme(dark) {
      if (dark) {
        document.documentElement.classList.add("dark");
        if (sun) sun.style.display = "inline";
        if (moon) moon.style.display = "none";
      } else {
        document.documentElement.classList.remove("dark");
        if (moon) moon.style.display = "inline";
        if (sun) sun.style.display = "none";
      }
      localStorage.setItem("theme", dark ? "dark" : "light");
    }

    // Init
    const saved = localStorage.getItem("theme");
    if (saved === "dark" || (!saved && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
      setTheme(true);
    } else {
      setTheme(false);
    }

    if (btn) {
      btn.addEventListener("click", () => {
        const isDark = document.documentElement.classList.contains("dark");
        setTheme(!isDark);
      });
    }
  });
</script>